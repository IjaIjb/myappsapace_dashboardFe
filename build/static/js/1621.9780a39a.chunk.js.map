{"version":3,"file":"static/js/1621.9780a39a.chunk.js","mappings":"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","sources":["pages/dashboard/coupon/EditCoupon.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport DashboardLayout from '../../../components/DashboardLayout';\r\nimport { UserApis } from '../../../apis/userApi/userApi';\r\nimport { RootState } from '../../../store/store';\r\nimport { FiTrash2, FiSave } from 'react-icons/fi';\r\nimport { IoArrowBack } from 'react-icons/io5';\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"react-responsive-modal/styles.css\";\r\nimport { Modal } from \"react-responsive-modal\";\r\n\r\nconst EditCoupon = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const selectedStore = useSelector(\r\n    (state: RootState) => state.globalState?.selectedStore || null\r\n  );\r\n\r\n  const [formData, setFormData] = useState({\r\n    code: '',\r\n    discount_value: '',\r\n    discount_type: 'percentage',\r\n    expiry_date: '',\r\n    is_active: true,\r\n  });\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  // Modal state\r\n  const [deleteModalOpen, setDeleteModalOpen] = useState(false);\r\n\r\n  // Format date from \"2025-04-05 00:00:00\" to \"2025-04-05\" for date input\r\n  const formatDateForInput = (dateString:any) => {\r\n    try {\r\n      const date = new Date(dateString);\r\n      return date.toISOString().split('T')[0];\r\n    } catch (e) {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  // Get tomorrow's date in YYYY-MM-DD format for min date in date picker\r\n  const tomorrow = new Date();\r\n  tomorrow.setDate(tomorrow.getDate() + 1);\r\n  const tomorrowFormatted = tomorrow.toISOString().split('T')[0];\r\n\r\n  // Fetch coupon data\r\n  useEffect(() => {\r\n    if (selectedStore && id) {\r\n      setLoading(true);\r\n      setError('');\r\n      \r\n      UserApis.getSingleCoupon(selectedStore, id)\r\n        .then((response) => {\r\n          if (response?.data?.coupon) {\r\n            const coupon = response.data.coupon;\r\n            setFormData({\r\n              code: coupon.code || '',\r\n              discount_value: coupon.discount_value || '',\r\n              discount_type: coupon.discount_type || 'percentage',\r\n              expiry_date: formatDateForInput(coupon.expiry_date) || '',\r\n              is_active: coupon.is_active === 1,\r\n            });\r\n          } else {\r\n            setError('Could not find coupon details.');\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error fetching coupon:', err);\r\n          setError('Failed to load coupon details. Please try again.');\r\n        })\r\n        .finally(() => {\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [selectedStore, id]);\r\n\r\n  const handleChange = (e:any) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: type === 'checkbox' ? checked : value,\r\n    });\r\n  };\r\n\r\n  const validateForm = () => {\r\n    // Reset error message\r\n    setError('');\r\n\r\n    // Code validation (alphanumeric)\r\n    if (!/^[A-Z0-9]+$/.test(formData.code)) {\r\n      setError('Coupon code must contain only uppercase letters and numbers (e.g., SURECODER14)');\r\n      return false;\r\n    }\r\n\r\n    // Discount value validation (must be greater than 0)\r\n    const discountValue = parseFloat(formData.discount_value);\r\n    if (isNaN(discountValue) || discountValue <= 0) {\r\n      setError('Discount value must be greater than 0');\r\n      return false;\r\n    }\r\n\r\n    // For percentage, ensure value is between 1 and 100\r\n    if (formData.discount_type === 'percentage' && (discountValue < 1 || discountValue > 100)) {\r\n      setError('Percentage discount must be between 1 and 100');\r\n      return false;\r\n    }\r\n\r\n    // Expiry date validation\r\n    if (!formData.expiry_date) {\r\n      setError('Expiry date is required');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = async (e:any) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    if (!selectedStore) {\r\n      setError('No store selected. Please select a store first.');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      // Prepare payload\r\n      const payload = {\r\n        ...formData,\r\n        discount_value: parseFloat(formData.discount_value),\r\n        is_active: formData.is_active ? 1 : 0,\r\n      };\r\n\r\n      // Call API\r\n      const response = await UserApis.updateCoupon(selectedStore, id, payload);\r\n      \r\n      if (response.data) {\r\n        setSuccess('Coupon updated successfully!');\r\n       toast.success(\r\n                        response?.data?.message || \"Coupon updated successfully!\"\r\n                      );\r\n        // Redirect after a short delay\r\n        setTimeout(() => {\r\n          navigate('/dashboard/coupons');\r\n        }, 1500);\r\n      }\r\n    } catch (err:any) {\r\n      console.error('Error updating coupon:', err);\r\n      setError(err.response?.data?.message || 'Failed to update coupon. Please try again.');\r\n            toast.error(err.response?.data?.message || 'Failed to update coupon. Please try again.');\r\n      \r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n    // Open delete confirmation modal\r\n    const openDeleteModal = () => {\r\n        setDeleteModalOpen(true);\r\n      };\r\n    \r\n      // Close delete confirmation modal\r\n      const closeDeleteModal = () => {\r\n        setDeleteModalOpen(false);\r\n      };\r\n\r\n  const handleDelete = async () => {\r\n \r\n    if (!selectedStore) {\r\n      setError('No store selected. Please select a store first.');\r\n      closeDeleteModal();\r\n       return;\r\n    }\r\n\r\n    setDeleting(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await UserApis.deleteCoupon(selectedStore, id);\r\n      if (response.data) {\r\n      toast.success(\r\n                       response?.data?.message || \"Coupon deleted successfully!\"\r\n                     );\r\n        setSuccess('Coupon deleted successfully!');\r\n        closeDeleteModal();\r\n        // Redirect after a short delay\r\n        setTimeout(() => {\r\n          navigate('/dashboard/coupon');\r\n        }, 1500);\r\n      }\r\n    } catch (err:any) {\r\n      console.error('Error deleting coupon:', err);\r\n         toast.error(err.response?.data?.message || 'Failed to delete coupon. Please try again.');\r\n         closeDeleteModal();\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n              {/* Delete Confirmation Modal */}\r\n      <Modal\r\n        open={deleteModalOpen}\r\n        onClose={closeDeleteModal}\r\n        center\r\n        classNames={{\r\n          modal: \"rounded-lg p-6 max-w-md w-full\"\r\n        }}\r\n      >\r\n        <div className=\"text-center\">\r\n          <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\">\r\n            <FiTrash2 className=\"h-8 w-8 text-red-600\" />\r\n          </div>\r\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-2\">Delete Coupon</h3>\r\n          <p className=\"text-sm text-gray-500 mb-6\">\r\n            Are you sure you want to delete this coupon? This action cannot be undone.\r\n          </p>\r\n          <div className=\"flex justify-center space-x-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={closeDeleteModal}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleDelete}\r\n              disabled={deleting}\r\n              className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50\"\r\n            >\r\n              {deleting ? \"Deleting...\" : \"Delete\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <div className=\" mx-auto p-4 bg-white rounded-lg shadow-md\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <div className=\"flex items-center\">\r\n            <button \r\n              onClick={() => navigate('/dashboard/coupons')}\r\n              className=\"mr-3 text-gray-600 hover:text-gray-900\"\r\n            >\r\n              <IoArrowBack size={20} />\r\n            </button>\r\n            <h2 className=\"text-2xl font-semibold text-gray-800\">Edit Coupon</h2>\r\n          </div>\r\n          <button\r\n           onClick={openDeleteModal}\r\n            className=\"flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50\"\r\n          >\r\n            <FiTrash2 className=\"mr-2\" />\r\n            Delete Coupon\r\n          </button>\r\n        </div>\r\n        \r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        {success && (\r\n          <div className=\"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded\">\r\n            {success}\r\n          </div>\r\n        )}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"code\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Coupon Code*\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"code\"\r\n              name=\"code\"\r\n              value={formData.code}\r\n              onChange={handleChange}\r\n              placeholder=\"e.g., SURECODER14, FLASH30\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n            <p className=\"text-sm text-gray-500 mt-1\">\r\n              Use uppercase letters and numbers only (e.g., SURECODER14)\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"discount_value\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Discount Value*\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"discount_value\"\r\n              name=\"discount_value\"\r\n              value={formData.discount_value}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter discount value\"\r\n              min=\"0.01\"\r\n              step=\"0.01\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n            <p className=\"text-sm text-gray-500 mt-1\">\r\n              {formData.discount_type === 'percentage' \r\n                ? 'Enter a percentage value between 1-100%' \r\n                : 'Enter a fixed amount'}\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"discount_type\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Discount Type*\r\n            </label>\r\n            <select\r\n              id=\"discount_type\"\r\n              name=\"discount_type\"\r\n              value={formData.discount_type}\r\n              onChange={handleChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            >\r\n              <option value=\"percentage\">Percentage (%)</option>\r\n              <option value=\"fixed\">Fixed Amount</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"expiry_date\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Expiry Date*\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"expiry_date\"\r\n              name=\"expiry_date\"\r\n              value={formData.expiry_date}\r\n              onChange={handleChange}\r\n              min={tomorrowFormatted}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-6\">\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"is_active\"\r\n                name=\"is_active\"\r\n                checked={formData.is_active}\r\n                onChange={handleChange}\r\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <label htmlFor=\"is_active\" className=\"ml-2 block text-gray-700\">\r\n                Active Coupon\r\n              </label>\r\n            </div>\r\n            <p className=\"text-sm text-gray-500 mt-1\">\r\n              Inactive coupons cannot be used until activated\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              type=\"submit\"\r\n              disabled={saving}\r\n              className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50\"\r\n            >\r\n              <FiSave className=\"mr-2\" />\r\n              {saving ? 'Saving...' : 'Save Changes'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n};\r\n\r\nexport default EditCoupon;"],"names":["EditCoupon","id","useParams","navigate","useNavigate","selectedStore","useSelector","state","_state$globalState","globalState","formData","setFormData","useState","code","discount_value","discount_type","expiry_date","is_active","loading","setLoading","saving","setSaving","deleting","setDeleting","error","setError","success","setSuccess","deleteModalOpen","setDeleteModalOpen","formatDateForInput","dateString","Date","toISOString","split","e","tomorrow","setDate","getDate","tomorrowFormatted","useEffect","UserApis","getSingleCoupon","then","response","_response$data","data","coupon","catch","err","console","finally","handleChange","name","value","type","checked","target","_objectSpread","closeDeleteModal","_jsx","DashboardLayout","children","className","_jsxs","Modal","open","onClose","center","classNames","modal","FiTrash2","onClick","async","deleteCoupon","_response$data3","toast","message","setTimeout","_err$response3","_err$response3$data","disabled","IoArrowBack","size","openDeleteModal","onSubmit","preventDefault","validateForm","test","discountValue","parseFloat","isNaN","payload","updateCoupon","_response$data2","_err$response","_err$response$data","_err$response2","_err$response2$data","htmlFor","onChange","placeholder","required","min","step","FiSave"],"sourceRoot":""}