"use strict";(self.webpackChunkmyappspacedashboard=self.webpackChunkmyappspacedashboard||[]).push([[1717],{629:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(9379),n=s(5043),o=s(3003),r=s(4435),c=s(4630),l=s(7488),d=(s(2342),s(3216)),i=s(579);const u=()=>{const e=(0,o.d4)((e=>{var t;return(null===(t=e.globalState)||void 0===t?void 0:t.selectedStore)||null})),t=(0,d.Zp)(),[s,u]=(0,n.useState)({code:"",discount_value:"",discount_type:"percentage",expiry_date:"",is_active:!0}),[p,m]=(0,n.useState)(!1),[b,x]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),v=new Date;v.setDate(v.getDate()+1);const y=v.toISOString().split("T")[0],f=e=>{const{name:t,value:n,type:o,checked:r}=e.target;u((0,a.A)((0,a.A)({},s),{},{[t]:"checkbox"===o?r:n}))};return(0,i.jsxs)(c.A,{children:[(0,i.jsxs)("div",{className:" mx-auto p-4 bg-white rounded-lg shadow-md",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Create New Coupon"}),b&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:b}),g&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:g}),(0,i.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),(()=>{if(x(""),!/^[A-Z0-9]+$/.test(s.code))return x("Coupon code must contain only uppercase letters and numbers (e.g., SURECODER14)"),!1;const e=parseFloat(s.discount_value);return isNaN(e)||e<=0?(x("Discount value must be greater than 0"),!1):"percentage"===s.discount_type&&(e<1||e>100)?(x("Percentage discount must be between 1 and 100"),!1):!!s.expiry_date||(x("Expiry date is required"),!1)})())if(e){m(!0),x(""),h("");try{const n=(0,a.A)((0,a.A)({},s),{},{discount_value:parseFloat(s.discount_value),is_active:s.is_active?1:0}),c=await r.F.createCoupon(e,n);var o;if(console.log(c),c.data)u({code:"",discount_value:"",discount_type:"percentage",expiry_date:"",is_active:!0}),l.oR.success((null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.message)||"Coupon created successfully!"),t("/dashboard/coupon")}catch(i){var c,d;console.error("Error creating coupon:",i),l.oR.error((null===(c=i.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||"Failed to create coupon. Please try again.")}finally{m(!1)}}else x("No store selected. Please select a store first.")},children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"code",className:"block text-gray-700 font-medium mb-2",children:"Coupon Code*"}),(0,i.jsx)("input",{type:"text",id:"code",name:"code",value:s.code,onChange:f,placeholder:"e.g., SURECODER14, FLASH30",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Use uppercase letters and numbers only (e.g., SURECODER14)"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"discount_value",className:"block text-gray-700 font-medium mb-2",children:"Discount Value*"}),(0,i.jsx)("input",{type:"number",id:"discount_value",name:"discount_value",value:s.discount_value,onChange:f,placeholder:"Enter discount value",min:"0.01",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"percentage"===s.discount_type?"Enter a percentage value between 1-100%":"Enter a fixed amount"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"discount_type",className:"block text-gray-700 font-medium mb-2",children:"Discount Type*"}),(0,i.jsxs)("select",{id:"discount_type",name:"discount_type",value:s.discount_type,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,i.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,i.jsx)("option",{value:"fixed",children:"Fixed Amount"})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"expiry_date",className:"block text-gray-700 font-medium mb-2",children:"Expiry Date*"}),(0,i.jsx)("input",{type:"date",id:"expiry_date",name:"expiry_date",value:s.expiry_date,onChange:f,min:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:s.is_active,onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-gray-700",children:"Active Coupon"})]}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Inactive coupons cannot be used until activated"})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(p?"opacity-50 cursor-not-allowed":""),children:p?"Creating...":"Create Coupon"})})]})]}),(0,i.jsx)(l.N9,{position:"top-right",autoClose:2e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}}}]);
//# sourceMappingURL=1717.0d83a5d9.chunk.js.map