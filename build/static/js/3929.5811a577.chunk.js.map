{"version":3,"file":"static/js/3929.5811a577.chunk.js","mappings":"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","sources":["pages/dashboard/coupon/Coupon.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"react-responsive-modal/styles.css\";\r\nimport { Modal } from \"react-responsive-modal\";\r\nimport DashboardLayout from \"../../../components/DashboardLayout\";\r\nimport { IoAddCircleOutline } from \"react-icons/io5\";\r\nimport { FaEdit, FaToggleOn, FaToggleOff } from \"react-icons/fa\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../../store/store\";\r\nimport { UserApis } from \"../../../apis/userApi/userApi\";\r\n\r\nconst Coupon = () => {\r\n  const selectedStore = useSelector(\r\n    (state: RootState) => state.globalState?.selectedStore || null\r\n  );\r\n  const [coupons, setCoupons] = React.useState<any>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const onOpenModal = () => {\r\n    setOpen(true);\r\n  };\r\n  const onCloseModal = () => setOpen(false);\r\n\r\n  useEffect(() => {\r\n    if (!selectedStore) {\r\n      onOpenModal();\r\n    } else {\r\n      onCloseModal();\r\n    }\r\n  }, [selectedStore]);\r\n\r\n  React.useEffect(() => {\r\n    if (selectedStore) {\r\n      setLoading(true);\r\n      UserApis.getCoupon(selectedStore)\r\n        .then((response) => {\r\n          if (response?.data) {\r\n            console.log(response?.data);\r\n            // Make sure we're accessing the coupons array from the response\r\n            setCoupons(response?.data?.coupons || []);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error fetching coupons:\", error);\r\n        })\r\n        .finally(() => {\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [selectedStore]);\r\n\r\n  // Format date from \"2025-04-05 00:00:00\" to \"Apr 5, 2025\"\r\n  const formatDate = (dateStr: any) => {\r\n    try {\r\n      const date = new Date(dateStr);\r\n      return date.toLocaleDateString(\"en-US\", {\r\n        year: \"numeric\",\r\n        month: \"short\",\r\n        day: \"numeric\",\r\n      });\r\n    } catch (e) {\r\n      return dateStr;\r\n    }\r\n  };\r\n\r\n  // Handle coupon activation/deactivation\r\n  const toggleCouponStatus = (id: any, currentStatus: any) => {\r\n    // Implement your API call to toggle status here\r\n    console.log(\r\n      `Toggling coupon ${id} from ${currentStatus ? \"active\" : \"inactive\"} to ${\r\n        !currentStatus ? \"active\" : \"inactive\"\r\n      }`\r\n    );\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <Modal\r\n        classNames={{\r\n          modal: \"rounded-[10px] overflow-visible relative\",\r\n        }}\r\n        open={open}\r\n        onClose={() => {}} // Prevents closing the modal\r\n        closeOnEsc={false} // Prevent closing with the Escape key\r\n        closeOnOverlayClick={false} // Prevent closing by clicking outside\r\n        showCloseIcon={false} // Hides the close button\r\n        center\r\n      >\r\n        <div className=\"px-2 md:px-5 h-[100px] flex justify-center items-center text-center\">\r\n          <div>\r\n            <h4 className=\"text-[20px] font-[600] mb-4\">Don't have a Store?</h4>\r\n            <Link\r\n              to=\"/dashboard/create-store\"\r\n              className=\"underline text-blue-800\"\r\n            >\r\n              Create a Store\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      <div>\r\n        <div className=\"flex gap-3 items-center mb-7\">\r\n          <Link\r\n            to={\"/dashboard/create-coupon\"}\r\n            className=\"rounded-full h-fit flex items-center gap-3 px-4 py-2\"\r\n            style={{\r\n              background: \"linear-gradient(to bottom, #382B67, #7056CD)\",\r\n            }}\r\n          >\r\n            <IoAddCircleOutline className=\"text-white\" />\r\n            <h5 className=\"text-[#FFFFFF] text-[16px] font-[400] whitespace-nowrap\">\r\n              Create Coupon\r\n            </h5>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"shadow-lg sm:rounded-lg w-full mt-6 overflow-x-auto\">\r\n          {loading ? (\r\n            <div className=\"flex justify-center items-center py-10\">\r\n              <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-700\"></div>\r\n            </div>\r\n          ) : coupons.length === 0 ? (\r\n            <div className=\"text-center py-10 text-gray-500\">\r\n              No coupons found. Create your first coupon to get started.\r\n            </div>\r\n          ) : (\r\n            <table className=\"min-w-full text-sm text-gray-500 divide-y divide-gray-200\">\r\n              <thead className=\"text-xs text-gray-700 uppercase bg-gray-50\">\r\n                <tr>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    S/N\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    Coupon Code\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    Discount\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    Expiry Date\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    Created At\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    Status\r\n                  </th>\r\n                  <th scope=\"col\" className=\"px-6 py-3 text-left\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {coupons.map((coupon: any, index: any) => (\r\n                  <tr key={coupon.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">{index + 1}</td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap font-medium\">\r\n                      {coupon.code}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      {coupon.discount_value}\r\n                      {coupon.discount_type === \"percentage\" ? \"%\" : \" (Fixed)\"}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      {formatDate(coupon.expiry_date)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      {formatDate(coupon.created_at)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <span\r\n                        className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                          coupon.is_active\r\n                            ? \"bg-green-100 text-green-800\"\r\n                            : \"bg-red-100 text-red-800\"\r\n                        }`}\r\n                      >\r\n                        {coupon.is_active ? \"Active\" : \"Inactive\"}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-left text-sm font-medium\">\r\n                      <div className=\"flex items-center space-x-4\">\r\n                        <button\r\n                          onClick={() =>\r\n                            toggleCouponStatus(coupon.id, coupon.is_active)\r\n                          }\r\n                          className=\"text-purple-600 hover:text-purple-900\"\r\n                          title={coupon.is_active ? \"Deactivate\" : \"Activate\"}\r\n                        >\r\n                          {coupon.is_active ? (\r\n                            <FaToggleOn className=\"text-xl\" />\r\n                          ) : (\r\n                            <FaToggleOff className=\"text-xl\" />\r\n                          )}\r\n                        </button>\r\n                        <Link\r\n                          to={`/dashboard/edit-coupon/${coupon.id}`}\r\n                          className=\"text-indigo-600 hover:text-indigo-900\"\r\n                          title=\"Edit\"\r\n                        >\r\n                          <FaEdit />\r\n                        </Link>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n};\r\n\r\nexport default Coupon;\r\n"],"names":["Coupon","selectedStore","useSelector","state","_state$globalState","globalState","coupons","setCoupons","React","loading","setLoading","useState","open","setOpen","useEffect","UserApis","getCoupon","then","response","_response$data","data","console","log","catch","error","finally","formatDate","dateStr","Date","toLocaleDateString","year","month","day","e","_jsxs","DashboardLayout","children","_jsx","Modal","classNames","modal","onClose","closeOnEsc","closeOnOverlayClick","showCloseIcon","center","className","Link","to","style","background","IoAddCircleOutline","length","scope","map","coupon","index","code","discount_value","discount_type","expiry_date","created_at","concat","is_active","onClick","toggleCouponStatus","id","currentStatus","title","FaToggleOn","FaToggleOff","FaEdit"],"sourceRoot":""}